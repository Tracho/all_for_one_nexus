<!doctype html>
<html lang="en">

<head>
   <title>Mother V2</title>

   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Neucha&family=Open+Sans:ital,wght@0,400;0,600;0,800;1,400;1,700;1,800&display=swap"
      rel="stylesheet">

   <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
   <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='bootstrap.min.css') }}">
</head>

<body>
   <script>
      document.addEventListener('DOMContentLoaded', async function () {
         // Get the pagination parameters from the query string or use default values
         const page = new URLSearchParams(window.location.search).get('page') || 1;
         const perPage = new URLSearchParams(window.location.search).get('per_page') || 50;

         // Fetch data from the server
         const response = await fetch(`/index?page=${page}&per_page=${perPage}`);

         if (response.ok) {
            // Parse the JSON data
            const data = await response.json();
            console.log(data);

            // Use the data as needed, for example, update the DOM
            // Example: Assuming there's a div with id="items-container" to display the items
            const itemsContainer = document.getElementById('items-container');
            itemsContainer.innerHTML = ''; // Clear previous content

            data.items.forEach(item => {
               const itemElement = document.createElement('div');
               itemElement.textContent = JSON.stringify(item);
               itemsContainer.appendChild(itemElement);
            });

            // You can also use other data like total_pages, current_page, etc., as needed
         } else {
            console.error('Failed to fetch data:', response.statusText);
         }
      });
   </script>

   <!-- Navigation -->
   <section>
      <div class="container-fluid">
         <div class="row mt-3">
            <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top">
               <div class="container-fluid">
                  <a class="navbar-brand" href="#">Nexus one</a>
                  <button id="btnCollapse" class="navbar-toggler" type="button" data-toggle="collapse"
                     data-target="#navbarID" aria-controls="navbarID" aria-expanded="false"
                     aria-label="Toggle navigation">
                     <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse">
                     <div class="navbar-nav">
                        <div id="menu-container" class="d-flex flex-wrap">
                           <button class="m-2 btn btn-outline-light btnModal" id="add-product-button"
                              data-targetmodal="#Add_Product">Add Product</button>
                           <button class="m-2 btn btn-outline-light" id="delete-selected-button">Delete
                              Selected</button>
                           <button class="m-2 btn btn-outline-light" id="add-via-csv-button">Add via CSV</button>
                           <button class="m-2 btn btn-outline-light" id="parse-all-prices-button">Parse All
                              Prices</button>
                           <button class="m-2 btn btn-outline-light" id="parse-selected-prices-button">Parse Selected
                              Prices</button>
                           <button class="m-2 btn btn-outline-light" id="parse-all-delivery-prices-button">Parse All
                              Delivery
                              Prices</button>
                           <button class="m-2 btn btn-outline-light" id="parse-selected-delivery-prices-button">Parse
                              Selected
                              Delivery Prices</button>
                           <button class="m-2 btn btn-outline-light btnModal" data-targetmodal="#Customize"
                              id="customize-button">Customize</button>
                        </div>
                     </div>
                  </div>
               </div>
            </nav>
         </div>
      </div>
   </section>



   <!-- Modal Hidden modal dialog for column customization-->
   <section>
      <div id="customize-dialog" class="modalW modal fade  dNone" data-targetmodal="#Customize">
         <div class="bgModalEvent btnModal" data-targetmodal="#Customize"></div>
         <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
               <div class="modal-header">
                  <h1 class="modal-title fs-5">Customize Columns</h1>
                  <button type="button" class="btn-close btnModal" data-targetmodal="#Customize"></button>
               </div>
               <div class="modal-body d-flex justify-content-between flex-wrap align-items-center customize-checkboxes"
                  id="customize-checkboxes">
                  <!-- Checkboxes and names will be added dynamically using JavaScript -->
               </div>
               <div class="modal-body d-flex justify-content-between flex-wrap align-items-center">
                  <div>
                     <strong>Style Table:</strong>
                  </div>
                  <div id="CreateFormCheckingStyles" class="d-flex flex-wrap justify-content-between align-items-center">
                     <!-- Create Radio Style table -->
                  </div>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-primary" id="customize-save">Save</button>
                  <button type="button" class="btn btn-secondary btnModal" data-targetmodal="#Customize"
                     id="customize-cancel">Cancel</button>

               </div>
            </div>
         </div>
      </div>

      <div class="modalW modal fade  dNone" data-targetmodal="#Add_Product">
         <div class="bgModalEvent btnModal" data-targetmodal="#Add_Product"></div>
         <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
               <div class="modal-header">
                  <h1 class="modal-title fs-5">Add Product</h1>
                  <button type="button" class="btn-close btnModal" data-targetmodal="#Add_Product"></button>
               </div>
               <div class="modal-body">
                  <form id="add-product-form">
                     <!-- Add input fields for product details -->
                     <input type="text" class="my-2 form-control" id="sku" placeholder="SKU" required>
                     <input type="text" class="my-2 form-control" id="name" placeholder="Name" required>
                     <input type="text" class="my-2 form-control" id="thr-link" placeholder="THR Link">
                     <input type="text" class="my-2 form-control" id="ws-link" placeholder="WS Link">
                     <input type="text" class="my-2 form-control" id="pricing-strategy" placeholder="Pricing Strategy">
                     <input type="text" class="my-2 form-control" id="basic-handling-time"
                        placeholder="Basic Handling Time">
                     <input type="text" class="my-2 form-control" id="price" placeholder="Price">
                     <input type="text" class="my-2 form-control" id="median-ht"
                        placeholder="Threshold for median HT calculation">
                     <!-- Add more input fields for other product details -->
                     <div class="modal-footer">
                        <button type="submit" class="btn btn-success menu-container btnModal"
                           data-targetmodal="#Add_Product">Add</button>
                        <button type="button" class="btn btn-secondary btnModal"
                           data-targetmodal="#Add_Product">Close</button>
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </div>
   </section>





   <!-- Content  -->
   <section>
      <div class="container-fluid">
         <div class="row mt-10">
            <div class="col-12 d-flex flex-column my-2">
               <div class="d-flex my-2">

                  <div class="d-flex flex-column m-2">
                     <div>
                        <form class="form-inline">
                           <strong>Search</strong>
                           <div class="input-group mb-3">
                              <input id="InpSearch" type="text" class="form-control" placeholder="Text...">
                              <button class="btn btn-outline-secondary" type="button" id="SearchSubmit" disabled>Button</button>
                           </div>
                        </form>
                     </div>
                     <div class="d-flex">
                        <div class="form-check m-2">
                           <input class="form-check-input" type="radio" title="ASIN" name="SearchRadio" id="RadiASIN"
                              checked>
                           <label class="form-check-label" for="RadiASIN">
                              ASIN
                           </label>
                        </div>
                        <div class="form-check m-2">
                           <input class="form-check-input" type="radio" title="SKU" name="SearchRadio" id="RadioSKU">
                           <label class="form-check-label" for="RadioSKU">
                              SKU
                           </label>
                        </div>
                        <div class="form-check m-2">
                           <input class="form-check-input" type="radio" title="Pricing Strategy" name="SearchRadio"
                              id="RadioPricingStrategy">
                           <label class="form-check-label" for="RadioPricingStrategy">
                              Pricing Strategy
                           </label>
                        </div>
                     </div>
                  </div>

                  <div class="d-flex m-2">
                     <form class="form-inline">
                        <strong>Number of items</strong>
                        <div class="input-group mb-3">
                           <input id="InpNumberOfItems" value="10" type="number" class="form-control"
                              placeholder="Number of items">
                           <button class="btn btn-outline-secondary" type="button" id="BtnNumberOfItems">Button</button>
                        </div>
                     </form>
                  </div>

               </div>

 

            </div>

            <div class="col-12 my-2 overflow-x-scroll">
               <table class="ToggleStyleTable table-striped table table-bordered">
                  <!-- NewTableHeaders Create columns th -->
                  <thead>
                     <tr id="NewTableHeaders"></tr>
                  </thead>
                  <!-- newTable Create Rows td -->
                  <tbody id="newTable"></tbody>
               </table>
            </div>
         </div>
      </div>
   </section>


   <!-- Pagination -->
   <section>
      <div class="container-fluid">
         <div class="row mt-10">
            <div class="col-12 d-flex my-2">
               <nav class="fixedBot" aria-label="Page navigation example">
                  <div class="p-2 m-1 styletotalPgage text-bg-dark">
                     <span id="current-page">Page <b>{{ current_page }}</b> of <span id="total-pages">{{ total_pages
                           }}</span></span>
                  </div>

                  <ul class="pagination pagidark">
                     <li class="page-item"><a class="page-link" href="?page=1&per_page={{ per_page }}">First</a></li>
                     {% if current_page > 1 %}
                     <li class="page-item"><a class="page-link"
                           href="?page={{ current_page - 1 }}&per_page={{ per_page }}">Previous</a></li>
                     {% endif %}
                     {% if current_page < total_pages %} <li class="page-item"><a class="page-link"
                           href="?page={{ current_page + 1 }}&per_page={{ per_page }}">Next</a></li>
                        {% endif %}
                        <li class="page-item"><a class="page-link"
                              href="?page={{ total_pages }}&per_page={{ per_page }}">Last</a></li>
                  </ul>
               </nav>
            </div>
         </div>
      </div>
   </section>

   <script type="module" src="{{ url_for('static', filename='script.js') }}"></script>
</body>


</html>